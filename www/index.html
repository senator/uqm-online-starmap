<!DOCTYPE html>
<html>
    <head>
        <title>Map</title>
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" media="screen and (orientation: portrait)"
            href="css/portrait.css">
        <link rel="stylesheet" media="screen and (orientation: landscape)"
            href="css/landscape.css">
        <script data-main="lib/app" src="thirdparty/require.js"></script>
        <script>
            require(["starmap", "gamedata/condensed"],
                function(starmap, gamedata) {
                $(document).ready(function() {
                    // Stuff a reference to the star_map instance in the
                    // global namespace for easier debugging.
                    window.star_map = new starmap.StarMap({
                        viewPortElement: document.documentElement,
                        data: gamedata
                    });
                });
            });
        </script>
    </head>
    <body>
        <nav id="menu">
            <div>
                <a href="#" class="hamburger">&#8801;</a><!-- XXX TODO
                replace with PNG hamburger; only way to get clickable
                area the right size -->
            </div>
            <div>next</div>
        </nav>

        <div id="starmap_layers">
            <canvas id="underlay"></canvas>
            <canvas id="canvas"></canvas>
            <canvas id="overlay">Your browser needs HTML5 support.</canvas>
        </div>
        <div id="readout">
            <div class="hover-msg" data-bind="visible: clear()">
                Hover over a star.
            </div>
            <div data-bind="visible: !clear()">
                <div class="star-name" data-bind="text: star_name"></div>
                <div class="star-info">
                    <span class="star-type"
                        data-bind="style: { color: star_color_rgb }">
                        <span data-bind="text: star_bullet"></span>
                        <span data-bind="text: star_type"></span>
                    </span>
                    at
                    <span data-bind="text: star_x"></span> x
                    <span data-bind="text: star_y"></span>
                </div>
                <div>Catalog #<span data-bind="text: star_index"></span></div>
            </div>
        </div>
        <div id="popup"
            data-bind="visible: pop, style: { zIndex: (pop() ? 10 : 0) }">
            <div id="system" data-bind="visible: show_system">
                <div class="closer">
                    <a href="#" data-bind="click: close_system">[X]</a>
                </div>
                <h1 data-bind="text: star_display_get('name')"></h1>
                <!-- XXX TODO color, type, pos, etc -->
                <table class="system_table">
                    <thead>
                        <tr>
                            <th>World</th>
                            <th>Type</th>
                            <th title="Mineral Wealth (in R.U.)">R.U.</th>
                            <th title="Biological Data">Bio</th>
                            <th title="Temperature">Tmp</th>
                            <th title="Weather">Wea</th>
                            <th title="Tectonics">Tec</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: worldsWithInlineSatellites">
                        <tr>
                            <td class="world"
                                data-bind="css: { moon: is_moon }"><a href="#"
                                    data-bind="text: name"></a></td>
                            <td data-bind="text: type"></td>
                            <td class="figure"
                                data-bind="text: mineral_wealth == null ? '--' : mineral_wealth"></td>
                            <td class="figure"
                                data-bind="text: bio_data == null ? '--' : bio_data"></td>
                            <td class="range">
                                <span data-bind="visible: temperature == null">
                                    --</span>
                                <meter min="-100" max="400" optimum="0" low="100" high="200"
                                    data-bind="value: temperature, visible: temperature != null, css: { overmax: temperature > 400 }, attr: { title: temperature }"></meter>
                            </td>
                            <td class="range">
                                <span data-bind="visible: weather == null">
                                    --</span>
                                <meter min="0" max="8" optimum="0" low="2" high="5"
                                    data-bind="value: weather, visible: weather != null, attr: { title: weather }"></meter>
                            </td>
                            <td class="range">
                                <span data-bind="visible: tectonics == null">
                                    --</span>
                                <meter min="0" max="8" optimum="0" low="2" high="5"
                                    data-bind="visible: tectonics != null, value: tectonics, attr: { title: tectonics }"></meter>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div id="world" data-bind="visible: show_world">
                <!-- XXX TODO template for display of one world info here -->
            </div>
        </div>
    </body>
</html>
